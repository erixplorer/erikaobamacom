/*========================================
    Setup: Color Scheme
======================================== */
  
:root {
  color-scheme: light dark;
  --bg1: light-dark(#f9f6f1, #000000);
  --bg2: light-dark(#d2ccff, #776ad4);
  --bg3: light-dark(#e8e5e1, #575561);
  --bg4: light-dark(#fefcf9, #252525);
  --bg-gradient: linear-gradient( to right,
    light-dark(#e5d5fb, #8a69b7),
    light-dark(#d3ddfa, #7590e8)
  );
  --bg-gradient-alt: linear-gradient( to right,
    light-dark(#8a69b7, #e5d5fb),
    light-dark(#7590e8, #d3ddfa)
  );
  --text: light-dark(#111111, #fefcf9);
  --neutral: light-dark(#808080, #94928e);
  --ac1: light-dark(#7265d0, #d2ccff);
  --ac2: light-dark(#0f83cd, #b8e3ff);

  --pagefind-ui-primary: var(--text) !important;
  --pagefind-ui-text: var(--text) !important;
  --pagefind-ui-border: var(--bg3) !important;
  --pagefind-ui-background: var(--bg4) !important;
  .pagefind-ui__button:hover {border-color: var(--ac1) !important;}
  .pagefind-ui__search-input:focus-visible {border: var(--ac1) !important;}
}

:root[data-theme="system"] {
    color-scheme: light dark;
}
:root[data-theme="light"] {
    color-scheme: light;
}
:root[data-theme="dark"] {
    color-scheme: dark;
}

html {
  background-color: var(--bg1);
  transition: color 0.4s;
}

.bg1 {
  background: var(--bg1);
}
.bg2 {
  background: var(--bg2);
}
.bg3 {
  background: var(--bg3);
}
.bg4 {
  background: var(--bg4);
}
.bg-gradient {
  background: var(--bg-gradient);
}
.bg-ac1 {
  background: var(--ac1);
}

.col-bg1 {
  color: var(--bg1);
}
.col-bg2 {
  color: var(--bg2);
}
.col-bg3 {
  color: var(--bg3);
}
.col-bg4 {
  color: var(--bg4);
}
.col-ac1 {
  color: var(--ac1);
}

[data-theme='dark'] pre,
[data-theme='dark'] pre span {
  color: var(--shiki-dark) !important;
  background-color: var(--shiki-dark-bg) !important;
  /* Optional, if you also want font styles */
  font-style: var(--shiki-dark-font-style) !important;
  font-weight: var(--shiki-dark-font-weight) !important;
  text-decoration: var(--shiki-dark-text-decoration) !important;
}


  /*========================================
      Setup: Margins
  ======================================== */


    :root {
    /* == scale == */
    --ratio-xs: 1.2;  
    --ratio-sm: 1.25;  
    --ratio-base: 1.5;
    --ratio-lg: 2;
    
    /* == margins == */
    --m-2xs: calc(var(--m-xs)/var(--ratio-lg));
    --m-xs: calc(var(--m-sm)/var(--ratio-lg));
    --m-sm: calc(var(--m-base)/var(--ratio-lg));
    --m-base: 25px;
    --m-lg: calc(var(--m-base)*var(--ratio-lg));
    --m-xl: calc(var(--m-lg)*var(--ratio-lg));

    /* == radius == */
    --r-2xs: calc(var(--r-xs)/var(--ratio-base));
    --r-xs: calc(var(--r-sm)/var(--ratio-base));
    --r-sm: calc(var(--r-base)/var(--ratio-base));
    --r-base: 10px;
    --r-full: calc(infinity * 1px);

    /* == font == */
    --f-xs: calc(var(--f-sm)/var(--ratio-sm));
    --f-sm: calc(var(--f-base)/var(--ratio-sm));
    --f-base: 1rem;
    --f-lg: calc(var(--f-base)*var(--ratio-sm));
    --f-xl: calc(var(--f-lg)*var(--ratio-sm));
    --f-2xl: calc(var(--f-xl)*var(--ratio-sm));
    --f-3xl: calc(var(--f-2xl)*var(--ratio-sm));

    /* == line-height == */
    --line-sm: calc(var(--line-base)/var(--ratio-xs));
    --line-base: 1.5;
    --line-lg: calc(var(--line-base)*var(--ratio-xs));
  }



/*========================================
    Setup: Font
======================================== */

/* == Heading == */
@font-face {
  font-family: 'Ubuntu Sans Variable';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(https://cdn.jsdelivr.net/fontsource/fonts/ubuntu-sans:vf@latest/latin-wght-normal.woff2) format('woff2-variations');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}

@font-face {
  font-family: 'heading';
  src: local("Hiragino Kaku Gothic Pro W3"), local("Meiryo"), local("MS Gothic"), local("Noto Sans CJK JP"), sans-serif;
  font-weight: 400;
}

@font-face {
  font-family: 'heading';
  src: local("Hiragino Kaku Gothic Pro W6"), local("Meiryo Bold"), local("MS Gothic"), local("Noto Sans CJK JP"), sans-serif;
  font-weight: 700;
}

/* == Reading == */
@font-face {
  font-family: 'Inter Variable';
  font-style: normal;
  font-display: swap;
  font-weight: 400 700;
  src: url(https://cdn.jsdelivr.net/fontsource/fonts/inter:vf@latest/latin-wght-normal.woff2) format('woff2-variations');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}

@font-face {
  font-family: 'reading';
  src: local("Yu Gothic Medium"), local("MS Gothic"), local("Noto Sans CJK JP"), sans-serif;
  font-weight: 400;
}

@font-face {
  font-family: 'reading';
  src: local("Yu Gothic Bold"), local("MS Gothic"), local("Noto Sans CJK JP"), sans-serif;
  font-weight: 700;
}

/* == Code == */
@font-face {
  font-family: 'code';
  src: local("Andale Mono"), local("Consolas"), local("Yu Gothic Medium"), local("MS Gothic"), local("Noto Sans CJK JP"), monospace;
  font-weight: 400;
}




/*========================================
    Elements
======================================== */

/* == Typography == */

* {
  font-family: "Inter Variable", "reading", sans-serif;
  font-size: var(--f-base);
  color: var(--text);
  line-height: var(--line-base);
  overflow-wrap: anywhere;
  word-break: keep-all;
  line-break: strict;
}

a {
  color: var(--text);
  text-decoration: none;
  
  &:hover {
    text-decoration: underline;
  }
}

caption, 
figcaption, 
.caption,
.caption *, 
.tags * {
  font-size: var(--f-sm);
  line-height: var(--line-base);
  font-style: italic;
}

.font-sm {
  font-size: var(--f-sm);
  line-height: var(--line-base);
}


/* == Headings == */

h1, h2, h3, h4, h5, h6,
nav *,
h2 mark,
.intro .tagline, 
.article-title {
  font-family: "Ubuntu Sans Variable", "heading", sans-serif;
  font-weight: bold;
}

h1,
.intro .tagline {
  font-size: var(--f-3xl);
  line-height: var(--line-sm);
}

h2 {
  font-size: var(--f-2xl);
  line-height: var(--line-sm);
}
h3, 
.site-title a,
.article-title {
  font-size: var(--f-xl);
  line-height: var(--line-sm);
}
h4,
.nav-footer ul {
  font-size: var(--f-lg);
  line-height: var(--line-sm);
}
h5, 
h6 {
  font-size: var(--f-base);
  line-height: var(--line-sm);
}


/* == Image == */

[data-icon] {
  color: var(--text);
}

/* == Video == */

video {
  margin: var(--m-base) auto;
}

/* Component: Stacked Alpha Video */
stacked-alpha-video {
  display: inline-block;
}

stacked-alpha-video video {
  display: none;
}


/* == Buttons == */

.button {
  display: block;
  width: fit-content;
  margin: var(--m-sm) auto;
  padding: var(--m-sm) var(--m-base);
  border-radius: var(--r-full);
  text-decoration: none;
  color: var(--bg4);
  background: var(--ac1);
  transition-property: transform;
  transition-duration: 0.3s;
  transition-timing-function: ease-in-out;

  &:hover {
    text-decoration: none;
    background: var(--bg-gradient-alt);
    transform: scale(1.1);
    transition-property: transform;
    transition-duration: 0.2s;
    transition-timing-function: ease-in-out;
  }
  &:active {
    text-decoration: none;
    background: var(--ac1);
    transform: scale(1.05);
    transition-property: transform;
    transition-duration: 0.2s;
    transition-timing-function: ease-in-out;
  }

  &.light {
    color: var(--text);
    background: var(--bg2);
    
    &:hover {
    background: var(--bg-gradient);
    }
  }
}




/*========================================
    Layout
======================================== */

body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}


/* == Text elements == */

h1 {
  width: 100%;
  max-width: calc(64rem);
  margin: 0 auto 0;
  padding: var(--m-base);
}
  
.tagline + p {
  margin-bottom: var(--m-base);
}

.site-title {
  @apply
  flex-auto;
}

.heading-row {
  
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  justify-content: space-between;
  column-gap: var(--m-base);
}

figcaption {
  padding-bottom: var(--m-sm);
}

/* == List == */

ol,ul,li {
  padding-bottom: var(--m-2xs);
  line-height: var(--line-lg);
}
ol {
  list-style: decimal;
  }
ul {
  list-style: disc;
}
li {
  margin-left: 1em;
}


/* == Article list == */

.article-list {
  display: grid;
  grid-template-columns: repeat(1,minmax(0,1fr));
  overflow: hidden;
  align-items: baseline;
  gap: var(--m-lg);
  list-style: none;
  
  @apply 
  md:grid-cols-3;
  
  
  .list-item {
    gap: var(--m-base);
    margin-left: 0;
    @apply 
    flex 
    flex-wrap;
  
    div {
      width: 100%;
      row-gap: var(--m-sm);
      @apply 
      flex 
      flex-wrap;
    }

    .image {
      overflow: hidden;
      border-radius: var(--r-base);
      width: 100%;
      height: 100%;
            
      &:hover img {
        transform: scale(1.2);
      }
    }

    img {
      aspect-ratio: 16 / 9;
      object-fit: cover;
      width: 100%;
      height:auto;
      transition: all 0.3s ease-in-out;
      @apply
      md:[width:calc(100vw/3)]
      md:[max-width:calc(64rem/3)];
    } 

    .article-title {
      width: 100%;
    }
  }

  &.horizontal {
    @apply 
    md:flex
    md:flex-wrap;

    .list-item {
      @apply 
      flex-wrap
      md:flex-nowrap;
    }   
    .image {
      @apply
      md:flex-[1];
    }
  
    img {
      object-fit: cover;
      width: 100%;
      height: 100%;
    } 

    .postinfo {
      /* flex: 2; */
      row-gap: var(--m-sm);
      place-self: start;
      @apply
      md:flex-[3];
      .article-title {
        font-size: var(--f-lg);
      }
    }
  }
  
  &.column-4 {
    width: 100%;
    max-width: 100vw;
    gap: var(--m-sm);
    @apply 
    grid-cols-2
    md:grid-cols-4;
    
  .list-item {
        margin-bottom: auto;
    }
    a {
      position: relative;
      border-radius: var(--r-base);

      span.article-title {
        position: absolute;
        top:0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: var(--r-base);
        border-radius: inherit;
        color: var(--bg4);
        background: var(--bg-gradient-alt);
        opacity: 0;
        transition: all 0.3s ease-in-out;

        &:hover {
          opacity: .9;
          transition: all 0.3s ease-in-out;
        }
      }

      img {
        aspect-ratio: 1 / 1;
        object-fit: cover;
        width: 100%;
        height: auto;
        max-width:calc(100vw/2);
        @apply
        md:[max-width:calc(64rem/4)];
      } 
    }
  }
}


/* == Tag list == */

.tags {
    gap: var(--m-sm);
    list-style-type: none;

    @apply
    flex
    flex-wrap
}
.tag {
    background-color: var(--bg2);
    padding: var(--m-2xs) var(--m-xs);
    border-radius: var(--r-base) var(--r-2xs) var(--r-base) var(--r-2xs);
    width: fit-content;
    height: fit-content;
    margin-left: 0;

    &:hover {
      background: var(--bg-gradient);
    }
    a {
      color: var(--text);
      text-decoration: none;

      &:hover {
        color: var(--text);
        text-decoration: none;
      }
    }
}


/* == Table == */
    
th, tr, td {
  padding: var(--m-xs);
  border: 1px solid var(--neutral);
}
th {
  background: var(--bg3);
  color: var(--text);
}


/* == Blockquote / pre == */
blockquote, pre {
  padding: var(--m-sm);
  margin-bottom: var(--m-base);
  background: var(--bg3);
  border-radius: var(--r-2xs);
}


/* == Blockquote == */

blockquote {
  border-left: var(--m-xs) var(--ac1) solid;
}


/* == pre == */

pre {
  counter-reset: line;
    & > *{
      font-family: "code";
      }
  .line{
    counter-increment: line;

    &::before {
      content: counter(line);
      display: inline-block;
      width: var(--f-xl);
      margin-right: var(--m-2xs);
      font-size: var(--f-sm);
      color: #fff;
      opacity: .5;
    }
  }
}


/* == Containers == */

.wrapper {
  width: 100%;
  max-width: calc(64rem);
  margin: 0 auto auto auto;
  padding: var(--m-base);
  
  &:has(+ footer) {
    margin-bottom: var(--m-lg);
  }
}

.flex-container {
  display: flex;
  flex-wrap: wrap;
  gap: var(--m-base);
  @apply
  items-stretch
  justify-center;
}



/* == Navigation == */

nav {
  padding-top: var(--m-base);
  padding-bottom: var(--m-base);
  @apply 
    flex 
    items-center
    h-full;


  /* == Navigation: main == */

  &.nav-main {
    padding: var(--m-base);

    .nav-links {
      font-family: "Ubuntu Sans Variable", "heading", sans-serif;
      column-gap: var(--m-xs);
      background: var(--bg1);
      background-size: 100vw;
      background-position: right;
      overflow: hidden;
      transition-property: width;
      transition-timing-function: ease-in-out;
      transition-duration: 0.5s;

      @apply
      absolute 
      inset-y-0
      right-0
      z-50
      mt-[80px]
      w-0
      max-h-full
      md:flex
      md:flex-row
      md:items-center
      md:[background:transparent]
      md:max-h-screen
      md:w-auto
      md:mt-0
      md:relative 
      md:animate-normal;

      &.bg-gradient {
        background: var(--bg-gradient);
        background-size: 100vw;
        background-position: right;
        @apply
        md:[background:transparent];
      }
      
      a {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: clip;
        
        @apply 
        items-center
        py-4
        font-bold
        md:px-2
        md:py-2
        md:[overflow:unset]
        md:[white-space:unset]
        md:[text-overflow:unset];
      }

      a,
      select {
        padding: var(--m-xs);
        border-radius: var(--r-sm);
        text-decoration: none;
        transition: background-color 0.3s ease-in-out;
      }

      a:hover,
      select:hover,
      select:focus {
        background-color: var(--bg2);
        text-decoration: none;
        transition: background-color 0.3s ease-in-out;
      }

      .lang {
        font-size: var(--f-xs);
        line-height: var(--line-base);
      }

      .nav-desktop {
        display: none;
        @apply
        md:flex;
      }

      .nav-mobile {
        display: flex;
        @apply
        md:hidden;
      }
    }
    
    /* == Navigation: mobile == */

    .nav-links.expanded {
      width: 100%;
    }

    .hamburger {
      cursor: pointer;
      @apply 
      ml-5
      mt-1
      md:hidden;
        
      .line {
        display: block;
        width: 28px;
        height: 3px;
        margin-bottom:6px;
        border-radius: var(--r-full);
        background-color: var(--text);
      }
    }

    /* == Color Scheme switcher == */

    #color-scheme {
      margin: 0 0 0 var(--m-2xs);
      justify-content: center;
      @apply 
      flex 
      items-center
      md:justify-start;

      select {
        appearance: base-select;

        &:open{
          transition: unset;
        }
        &:not(:open) {
          background: transparent;
        }
      }

      select, select * {
        @apply
        text-sm
      }
    }
  }
}


/* == Box == */

.box {
  border-radius: 10px;
  padding: 3px;
  background: var(--bg-gradient);
  width: 100%;
  @apply
  flex 
  flex-wrap 
  items-stretch
  justify-center
  md:flex-nowrap;

  .box-content {
    width: 100%;
    padding: var(--m-base);
    column-gap: var(--m-base);
    row-gap: var(--m-xs);
    background: var(--bg4);
    border-radius: 7px;

    @apply
    flex 
    flex-wrap 
    items-stretch
    justify-center;
  
    .info {
      width: 100%;

      &:last-child {
        height: 100%;
      }
    }
    
    .type {
      color: var(--ac1);
      font-weight: bold;
      @apply
      md:text-center;
    }
  }

  p {
    margin-bottom: var(--m-2xs);
    &:last-child {
      height: 100%;
    }
  }
}

.work-type.flex-container {
    @apply
    md:flex-nowrap;

  .box {
    @apply
    md:flex-nowrap;

    .box-content {
      @apply
      flex-nowrap 
      md:flex-wrap;
    }
  }
}

.dark .flex-container .box {
  background: var(--bg-gradient);
}

.box-image {
  color: var(--text);
  @apply
  m-auto
  md:m-0;

  img, svg {
    width: 80px;
    height: 80px;
    margin: auto;
  }
}


/* == Article / Section == */

article, section {
  row-gap: var(--m-base);
  
  #article-info {
    display: flex;
    flex-wrap: wrap;
    column-gap: var(--m-sm);
    row-gap: var(--m-sm);
    margin-bottom: var(--m-lg);

    .description {
      width: 100%;
    }
    .project-info {
      display: flex;
      flex-wrap: wrap;
      width: 100%;
      gap: var(--m-base);
      
      li {
        list-style-type: none;
        margin-left: 0;
        font-size: var(--f-sm);
        line-height: var(--line-base);
        font-style: italic;
      }
    }
  }
  .heroimage {
    margin-bottom: var(--m-base);
  }
}


/* == Section == */

section {
    display: flex;
    flex-direction: column;

    &:not(:last-child) {
      margin-bottom: var(--m-lg);
    }
}


/* == Article == */

article {
  h2 {
    /* padding-bottom: var(--m-base); */
    &:not(:first-child) {
      padding-top: var(--m-lg);
    }
  }
  h3 {
    padding-top: var(--m-base);
    padding-bottom: var(--m-base);
  }
  h4 {
    padding-top: var(--m-sm);
    padding-bottom: var(--m-sm);
  }
  h5 {
    padding-top: var(--m-xs);
    padding-bottom: var(--m-xs);
  }
  h6 {
    padding-top: var(--m-2xs);
    padding-bottom: var(--m-2xs);
  }
  p + p, 
  ul + p, 
  ol + p {
    padding-top: var(--m-xs);
    padding-bottom: var(--m-2xs);
  }

  ul + h2, 
  ol + h2,
  ul + h3, 
  ol + h3,
  ul + h4, 
  ol + h4,
  ul + h5, 
  ol + h5,
  ul + h6, 
  ol + h6 {
    padding-top: var(--m-lg);
    padding-bottom: var(--m-base);
  }
  p + ul,
  p + ol {
    padding-top: var(--m-xs);
  }
  p img {
    padding-top: var(--m-sm);
  }
  > img {
    padding-top: var(--m-sm);
  }
}


article a,
.alink {
    text-decoration: underline;
    color: var(--ac1);
  &:hover {
    color: var(--ac2);
    text-decoration: none;
  }
}

.image-grid {
  display: grid;
  gap:var(--m-base);
  @apply
  md:[grid-template-columns:repeat(2,minmax(0,1fr))];

  img {
    border-radius: unset;
  }
}

article .list-item {
  padding-top: var(--m-base);
}


/* == Pagination == */

nav.pagination {
  @apply
  text-center;

  ul {
    display: flex;
    flex-direction: row;
    list-style: none;
    @apply
    items-center
    h-full
    m-auto;
    }
    
    a {
      padding-left: var(--m-sm);
      padding-right: var(--m-sm);
      border-radius: var(--r-full);
      
      &.transparent {
        visibility: hidden;
      }
    }
    .current-page {
      padding: var(--m-sm);
    }
}

nav.prev-next {
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  justify-content: space-between;
  column-gap: var(--m-base);
  margin-top: var(--m-lg);

  p {
    display: flex;
    flex: auto;
    flex-wrap: nowrap;
    align-items: center;
    column-gap: var(--m-2xs);

    span {
      height: 100%;
    }
    
    &.prev {
      justify-content: end;
      
    }
  }
}


/* == Footer == */

footer {
  /* margin-top: var(--m-lg); */
  margin-top: auto;
  padding-top: var(--m-base);
  padding-bottom: var(--m-base);
  background: var(--bg-gradient);
    
  nav.nav-footer {
    align-items: baseline;
    column-gap: var(--m-lg);
    flex-wrap: wrap;
    @apply
    md:flex-nowrap;
    
    ul {
      line-height: var(--line-lg);
      width: 100%;
      
      @apply
      md:w-auto;

      &:not(:last-child) {
        padding-bottom: var(--m-base);
      }
    }
    li {
      list-style-type: none;
      margin-left: 0;
      a {
        font-family: "Inter Variable", "reading", sans-serif;
        font-weight: normal;
      &:hover {
        color: var(--ac1);
        text-decoration: underline;
      }
    }
    }
  }
    
  .copyright {
    font-size: var(--f-sm);
    line-height: var(--line-base);
    text-align: center;
  }
}



/*========================================
    Animations
======================================== */

.fade-down {
  @apply
  animate-fade-down 
  animate-once;
}
.fade-left {
    @apply
    animate-fade-left 
    animate-once;
}
.fade-right {
    @apply
    animate-fade-right 
    animate-once;
}

@keyframes button-down {
  100% {
    transform: translateY(5px);
  }
}
